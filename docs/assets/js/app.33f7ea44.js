(function(e){function t(t){for(var n,s,o=t[0],u=t[1],c=t[2],l=0,h=[];l<o.length;l++)s=o[l],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);v&&v(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var o=r[s];0!==i[o]&&(n=!1)}n&&(a.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},s={app:0},i={app:0},a=[];function o(e){return u.p+"assets/js/"+({"direct-mode~research-mode~reverse-mode":"direct-mode~research-mode~reverse-mode","direct-mode":"direct-mode","research-mode":"research-mode","reverse-mode":"reverse-mode"}[e]||e)+"."+{"direct-mode~research-mode~reverse-mode":"8ccc940c","direct-mode":"aee0f9ac","research-mode":"f1a0161e","reverse-mode":"74320b76"}[e]+".js"}function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r={"direct-mode~research-mode~reverse-mode":1};s[e]?t.push(s[e]):0!==s[e]&&r[e]&&t.push(s[e]=new Promise((function(t,r){for(var n="assets/css/"+({"direct-mode~research-mode~reverse-mode":"direct-mode~research-mode~reverse-mode","direct-mode":"direct-mode","research-mode":"research-mode","reverse-mode":"reverse-mode"}[e]||e)+"."+{"direct-mode~research-mode~reverse-mode":"2a4b4cc2","direct-mode":"31d6cfe0","research-mode":"31d6cfe0","reverse-mode":"31d6cfe0"}[e]+".css",i=u.p+n,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var c=a[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===i))return t()}var h=document.getElementsByTagName("style");for(o=0;o<h.length;o++){c=h[o],l=c.getAttribute("data-href");if(l===n||l===i)return t()}var v=document.createElement("link");v.rel="stylesheet",v.type="text/css",v.onload=t,v.onerror=function(t){var n=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete s[e],v.parentNode.removeChild(v),r(a)},v.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(v)})).then((function(){s[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=a);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(e);var h=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(v);var r=i[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",h.name="ChunkLoadError",h.type=n,h.request=s,r[1](h)}i[e]=void 0}};var v=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var v=l;a.push([1,"chunk-vendors"]),r()})({0:function(e,t){},1:function(e,t,r){e.exports=r("56d7")},1432:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("a481"),r("7872"),r("aef6");var n=r("7618"),s=(r("c5f6"),r("d225")),i=r("b0b4"),a=.001,o=function(){function e(){Object(s["a"])(this,e)}return Object(i["a"])(e,null,[{key:"build",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return{value:Number(e).valueOf(),precision:Number(t).valueOf()}}},{key:"empty",value:function(){return this.build()}},{key:"copy",value:function(e){var t=e.value,r=void 0===t?0:t,n=e.precision,s=void 0===n?a:n;return this.build(r,s)}},{key:"alter",value:function(e,t){var r=e.value,n=void 0===r?0:r,s=e.precision,i=void 0===s?a:s;return this.build(this.isValid(t)?t:n,i)}},{key:"isValid",value:function(e){switch(Object(n["a"])(e)){case"number":return!isNaN(e);case"string":default:return e.length>0&&!isNaN(Number(e).valueOf())&&!e.endsWith(".")&&!e.endsWith(",")}}},{key:"format",value:function(e){var t=e.value,r=e.precision,n=Math.round(t/r)*r,s=Math.ceil(Math.log10(1/r));return n.toFixed(s).replace(/\.?[0]+$/,"")}},{key:"normalized",value:function(e,t){var r=e.value,n=void 0===r?0:r,s=e.precision,i=void 0===s?a:s;return this.build(t?Number(n).valueOf()/t:0,i)}}]),e}()},2:function(e,t){},3:function(e,t){},"324e":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return u}));var n=r("d225"),s=r("b0b4"),i="idle",a="previous",o="active",u=function(){function e(){Object(n["a"])(this,e)}return Object(s["a"])(e,null,[{key:"build",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{mode:e,visits:t,time:r}}},{key:"empty",value:function(){return this.build()}},{key:"copy",value:function(e){var t=e.mode,r=void 0===t?i:t,n=e.visits,s=void 0===n?0:n,a=e.time,o=void 0===a?0:a;return this.build(r,s,o)}},{key:"normalized",value:function(e,t){return this.override(e,{visits:0!==t?e.visits/t:0})}},{key:"idle",value:function(e){return this.override(e,{mode:i})}},{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.override(e,{mode:a,time:(e.time||0)+t})}},{key:"to",value:function(e){return this.override(e,{mode:o,visits:(e.visits||0)+1})}},{key:"override",value:function(e,t){return Object.assign({},e,t)}}]),e}()},4:function(e,t){},5:function(e,t){},"56cc":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-wrap"},[e._m(0),r("div",{staticClass:"container-fluid"},[r("div",{staticClass:"row"},[r("sidebar"),r("router-view")],1)])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"navbar navbar-dark bg-dark flex-md-nowrap p-0 shadow"},[r("a",{staticClass:"navbar-brand col-md-3 col-lg-2 mr-0",attrs:{href:"#"}},[e._v("Markov Modeling")]),r("ul",{staticClass:"navbar-nav px-3"},[r("li",{staticClass:"nav-item text-nowrap"},[r("a",{staticClass:"nav-link",attrs:{href:"https://sevsu.ru"}},[e._v("SevSU")])])])])}],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"col-md-3 col-lg-2 d-md-block bg-light"},[r("ul",{staticClass:"nav flex-column"},e._l(e.modes,(function(t,n){return r("li",{key:n,staticClass:"nav-item"},[r("router-link",{class:["nav-link",{active:e.currentRoute===n}],attrs:{to:n}},[e._v("\n                "+e._s(t)+"\n            ")])],1)})),0),r("div",{staticClass:"markov__mode-description"},["/direct"===e.currentRoute?[r("p",[e._v("Для построения модели укажите размерность и задайте вероятности между\n                соответствующими\n                состояниями в матрице. Модель будет перестроена автоматически в процессе заполнения\n                матрицы.")]),r("p",[e._v("Доступные действия над построенной моделью:")]),e._m(0)]:e._e(),"/reverse"===e.currentRoute?[r("p",[e._v("Для построения модели укажите размерность и задайте цепочки в текстовом поле. Каждая\n                строка текстового поля соответствует одной цепочке, количество цепочек и шагов в\n                цепочке\n                не ограничено. Матрица вероятностей перестраивается по мере ввода цепочек")]),r("p",[e._v("Доступные действия над построенной моделью:")]),e._m(1)]:e._e(),"/double"===e.currentRoute?[r("p",[e._v("В этом режиме модель строится в 2 этапа:")]),e._m(2),e._m(3),r("p",[e._v("В этом режиме недоступны пожаговое блуждание по цепи, отображение частот переходов и\n                состояний.")])]:e._e(),r("p",[e._v("Правила отображения:")]),e._m(4)],2)])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("strong",[e._v("Тестировать")]),e._v(" – производится построение указанного количества\n                    цепочек с учётом ограничения на максимальное количество шаговю. Основная цель\n                    тестирования – построение частоты переходов и состояний\n                ")]),r("li",[r("strong",[e._v("Шаг")]),e._v(" – пошаговое блуждание по модели. В случае достижения\n                    тупикового\n                    состояния модель будет сброшена в начало.\n                ")]),r("li",[r("strong",[e._v("Номалировать")]),e._v(" – позволяет привести сумму вероятностей исходящих\n                    переходов из состояния к 1.\n                ")]),r("li",[r("strong",[e._v("Очистить")]),e._v(" – если было запущено тестирование очистятся результаты\n                    тестирования, иначе будет очищена матрица вероятностей.\n                ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("strong",[e._v("Тестировать")]),e._v(" – производится построение указанного количества\n                    цепочек с учётом ограничения на максимальное количество шаговю. Основная цель\n                    тестирования – построение частоты переходов и состояний\n                ")]),r("li",[r("strong",[e._v("Шаг")]),e._v(" – пошаговое блуждание по модели. В случае достижения\n                    тупикового\n                    состояния модель будет сброшена в начало.\n                ")]),r("li",[r("strong",[e._v("Очистить")]),e._v(" – если было запущено тестирование очистятся результаты\n                    тестирования, иначе будет очищено поле цепочек.\n                ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("p",[e._v("Первичная модель строится прямой Марковской цепью, в которой необходимо\n                        указать\n                        размерность модели и заполнить матрицу вероятностей. Модель первого этапа\n                        строится в процессе ввода данных.")])]),r("li",[r("p",[e._v("Вторичная модель строится путём тестирования первичной модели и не изменяется\n                        при\n                        вводе данных. При тестировании генерируется указанное количество цепочек,\n                        которые подаются на вход обратной Марковской цепи. В результе формируется\n                        матрица вероятностей и модель второго этапа.")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v("На матрице вероятностей второго этапа не нулевые значения сопоставляются с матрицей\n                вероятностей первого этапа с точностью "),r("strong",[e._v("10"),r("sup",[e._v("-2")])]),e._v(". Равные\n                значения подсвечиваются\n                зелёным, отличающиеся красным.")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ol",[r("li",[e._v("Состояния именуются как "),r("strong",[e._v("S"),r("sub",[e._v("i")])]),e._v(", где "),r("strong",[e._v("i =\n                1..N")])]),r("li",[e._v("Направленные дуги между состояниями отображают переходы")]),r("li",[e._v("Подписи над дугами соответствуют вероятности перехода или частоте перехода (в\n                соответствующем режиме)\n            ")]),r("li",[e._v("Текущая вершина закрашивается в светло-синий цвет")]),r("li",[e._v("Предыдущая вершина закрашивается в серый цвет с чёрной границей")]),r("li",[e._v("Последний использованный переход выделяется красным цветом")]),r("li",[e._v("Тупиковые состояния закрашиваются в серый цвет без границ")]),r("li",[e._v("В режиме отображения частоты состояний состояния имеют прямоугольную форму, а число\n                внутри соответствует частоте нахождения системы в этом состоянии\n            ")])])}],u={name:"Sidebar",data:function(){return{modes:{"/direct":"Прямая Марковская модель","/reverse":"Обратная Марковская модель","/research":"Исследование Марковской модели"}}},computed:{currentRoute:function(){return this.$route.path}},methods:{switchMode:function(e){this.$store.commit("mode",e)}}},c=u,l=r("2877"),h=Object(l["a"])(c,a,o,!1,null,null,null),v=h.exports,f={name:"App",components:{sidebar:v}},p=f,d=(r("cf25"),Object(l["a"])(p,s,i,!1,null,null,null)),m=d.exports,b=r("8c4f"),z=function(){return Promise.all([r.e("direct-mode~research-mode~reverse-mode"),r.e("direct-mode")]).then(r.bind(null,"e44b"))},_=function(){return Promise.all([r.e("direct-mode~research-mode~reverse-mode"),r.e("reverse-mode")]).then(r.bind(null,"4a2f"))},g=function(){return Promise.all([r.e("direct-mode~research-mode~reverse-mode"),r.e("research-mode")]).then(r.bind(null,"6383"))};n["a"].use(b["a"]);var y=[{path:"/",component:z},{path:"/direct",component:z},{path:"/reverse",component:_},{path:"/research",component:g}],k=new b["a"]({routes:y}),x=r("75fc"),w=(r("ac6a"),r("c5f6"),r("04ff"),r("28a5"),r("96cf"),r("3b8d")),S=r("1432"),N=r("324e"),T=r("94e3");function j(e,t){var r=e.size,n=e.normalized,s=t.from,i=t.rnd;if(s>=r)throw new Error("From can't be greater than model size");for(var a=i,o=0;o<r;o++){if(n[s][o].value>0&&n[s][o].value>=a)return o;a-=n[s][o].value}return-1}function E(e,t){var r=e.size,n=e.normalized,s=t.from;if(s>=r)throw new Error("From can't be greater than model size");var i=Math.random();return j({size:r,normalized:n},{from:s,rnd:i})}function O(e){var t=e.type,r=void 0!==t&&t,n=e.attrs,s=void 0===n?[]:n;switch(r){case!1:return 0;case"normal":return Math.abs(T["rnorm"](1,s[0],s[1])[0]);case"log-normal":return Math.abs(T["rlnorm"](1,s[0],s[1])[0]);case"uniform":default:return Math.abs(T["runif"](1,s[0],s[1])[0])}}function C(e){for(var t=e.size,r=e.chains,n=e.steps,s=e.matrix,i=e.distribution,a=void 0===i?{}:i,o=[],u=[],c=0;c<t;c++)o.push(N["d"].empty());for(var l=0;l<r;l++){var h=0,v=-1;u.push([h]),o[h].visits++;for(var f=0;f<n&&-1!==h;f++)v=E({size:t,normalized:s},{from:h}),-1!==v&&(u[l].push(v),o[v].visits++,o[h].time+=O(a)),h=v}return{states:o,chains:u,matrix:s}}function M(e){for(var t=e.size,r=e.chains,n=[],s=0;s<t;s++){for(var i=[],a=0;a<t;a++)i.push(S["a"].empty());n.push(i)}for(var o=0;o<r.length;o++)for(var u=1;u<r[o].length;u++){var c=r[o][u-1],l=r[o][u];n[c][l].value++}return P(n)}function P(e){for(var t=[],r=function(r){var n=e[r].reduce((function(e,t){return e+t.value}),0);t.push(e[r].map((function(e){return n?S["a"].normalized(e,n):S["a"].empty()})))},n=0;n<e.length;n++)r(n);return t}var B={size:2,matrix:[[S["a"].empty(),S["a"].empty()],[S["a"].empty(),S["a"].empty()]],states:[N["d"].build(N["b"],1,0),N["d"].empty()],current:0,chains:[[0]]},A=function(e){for(var t=e.matrix,r=e.size,n=[],s=0;s<r;s++){for(var i=[],a=t[s].reduce((function(e,t){return e+t.value}),0),o=0;o<r;o++)a?i.push(S["a"].normalized(t[s][o],a)):i.push(S["a"].empty());n.push(i)}return n},$={normalized:function(e){var t=e.matrix,r=e.size;return A({matrix:t,size:r})},statesNormalized:function(e){for(var t=e.states,r=e.size,n=[],s=t.reduce((function(e,t){return e+t.visits}),0),i=0;i<r;i++)n.push(N["d"].normalized(t[i],s));return n},transitions:function(e){for(var t=e.size,r=e.matrix,n=e.chains,s=[],i=0;i<t;i++){for(var a=[],o=0;o<t;o++)a.push(S["a"].alter(r[i][o],0));s.push(a)}for(var u=0;u<n.length;u++)for(var c=1;c<n[u].length;c++){var l=n[u][c-1],h=n[u][c];s[l][h].value++}return s},transitionsNormalized:function(e,t){var r=e.size,n=t.transitions;return A({matrix:n,size:r})},frequency:function(e,t){for(var r=e.size,n=t.transitions,s=[],i=n.reduce((function(e,t){return e+t.reduce((function(e,t){return e+t.value}),0)}),0),a=0;a<r;a++){for(var o=[],u=0;u<r;u++)i?o.push(S["a"].normalized(n[a][u],i)):o.push(S["a"].empty());s.push(o)}return s},transitionsPlain:function(e){var t=e.chains;return t.map((function(e){return e.join(" ")})).join("\n")},transitionsHumanized:function(e){var t=e.chains;return t.map((function(e){return e.join(" ↠ ")}))}},q={normalize:function(e){var t=e.commit,r=e.getters;t("replace",r.normalized)},clear:function(e){var t=e.commit;t("clear")},test:function(e,t){for(var r=e.state,n=e.commit,s=e.getters,i=t.steps,a=t.chains,o=[],u=[],c=0;c<r.size;c++)o.push(N["d"].empty());for(var l=0;l<a;l++){var h=0,v=-1;u.push([h]),o[h].visits++;for(var f=0;f<i&&-1!==h;f++)v=E({size:r.size,normalized:s.normalized},{from:h}),-1!==v&&(u[l].push(v),o[v].visits++),h=v}return n("setBatch",{states:o,chains:u})},step:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,n=t.commit,s=t.getters,i=r.current,a=E({size:r.size,normalized:s.normalized},{from:i}),-1!==a){e.next=8;break}if(n("newChain"),a=E({size:r.size,normalized:s.normalized},{from:i}),-1!==a){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",n("step",{from:i,to:a}));case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},I={setBatch:function(e,t){var r=t.states,n=t.chains;e.current=-1,e.states=r,e.chains=n},newChain:function(e){e.chains.push([0]),e.current=0,e.states[0].visits++},step:function(e,t){for(var r=t.from,s=t.to,i=0;i<e.size;i++)e.states[i].mode===N["c"]&&n["a"].set(e.states,i,N["d"].idle(e.states[i]));return n["a"].set(e.states,r,N["d"].from(e.states[r])),n["a"].set(e.states,s,N["d"].to(e.states[s])),e.current=s,e.chains[e.chains.length-1].push(s),{from:r,to:s}},set:function(e,t){var r=e.matrix,s=t.x,i=t.y,a=t.value;S["a"].isValid(a)&&n["a"].set(r[s],i,S["a"].alter(r[s][i],a))},setTransitionsPlain:function(e,t){for(var r=[],s=0;s<e.size;s++){for(var i=[],a=0;a<e.size;a++)i.push(0);r.push(i)}t.split("\n").forEach((function(e){for(var t=e.split(" ").map((function(e){return Number.parseInt(e)})),n=0;n<t.length-1;n++){var s=t[n],i=t[n+1];r[s][i]++}}));for(var o=0;o<e.size;o++)for(var u=r[o].reduce((function(e,t){return e+t}),0),c=0;c<e.size;c++)r[o][c]=S["a"].build(u?r[o][c]/u:0);n["a"].set(e,"matrix",r)},replace:function(e,t){n["a"].set(e,"matrix",t)},resize:function(e,t){if(t=Math.max(2,parseInt(t)),!isNaN(t)){var r=e.size;e.size=t;var s=Math.min(r,e.size),i=e.matrix;n["a"].set(e,"matrix",[]);for(var a=[],o=0;o<e.size;o++){a.push(o<s?e.states[o]:N["d"].empty());for(var u=[],c=0;c<e.size;c++)o<s&&c<s?u.push(S["a"].copy(i[o][c])):u.push(S["a"].empty());e.matrix.push(u)}n["a"].set(e,"states",a)}},clear:function(e){if(e.chains.length>1||e.chains[0].length>1){e.chains=[[0]],e.current=0;for(var t=[N["d"].build(N["b"],1,0)],r=1;r<e.size;r++)t.push(N["d"].empty());n["a"].set(e,"states",t)}else{for(var s=[],i=0;i<e.size;i++){for(var a=[],o=0;o<e.size;o++)a.push(S["a"].empty());s.push(a)}n["a"].set(e,"matrix",s)}}},F={namespaced:!0,state:B,getters:$,actions:q,mutations:I,functions:{normalize:A}},R=r("1146"),D={steps:10,chains:5},L={sourceTable:function(e){for(var t=e.model,r=e.chains,n=e.steps,s=[],i=[""],a=0;a<t.size;a++)i.push("S".concat(a));s.push(["Размерность",t.size]),s.push(["Цепочки",r]),s.push(["Шаги",n]),s.push([]),s.push(["Исходная матрица"]),s.push(i);for(var o=0;o<t.size;o++){for(var u=["S".concat(o)],c=0;c<t.size;c++)u.push(t.matrix[o][c].value);s.push(u)}return s.push([]),s},resultTable:function(e,t){for(var r,n=e.model,s=[],i=[""],a=0;a<n.size;a++)i.push("S".concat(a));for(var o=[["Переходов"],["Время (общее)"],["Время (среднее)"]],u=0;u<n.size;u++){var c=n.states[u];o[0].push(c.visits),o[1].push(c.time),o[2].push(c.visits>0?c.time/c.visits:0)}s.push(i),o.forEach((function(e){return s.push(e)})),s.push([]),s.push(["Матрица количества переходов"]),s.push(i);for(var l=0;l<n.size;l++){r=["S".concat(l)];for(var h=0;h<n.size;h++)r.push(t["model/transitions"][l][h].value);s.push(r)}s.push([]),s.push(["Матрица вероятности переходов"]),s.push(i);for(var v=0;v<n.size;v++){r=["S".concat(v)];for(var f=0;f<n.size;f++)r.push(t["model/transitionsNormalized"][v][f].value);s.push(r)}s.push([]),s.push(["Матрица частот переходов"]),s.push(i);for(var p=0;p<n.size;p++){r=["S".concat(p)];for(var d=0;d<n.size;d++)r.push(t["model/frequency"][p][d].value);s.push(r)}return s.push([]),s},chainsTable:function(e){var t=e.model,r=[];return r.push(["Цепочки"]),t.chains.forEach((function(e){return r.push(e)})),r}},H={save:function(e){var t=e.getters,r=R["utils"].book_new();R["utils"].book_append_sheet(r,R["utils"].aoa_to_sheet(t.sourceTable),"Исходная модель"),R["utils"].book_append_sheet(r,R["utils"].aoa_to_sheet(t.resultTable),"Результаты"),R["utils"].book_append_sheet(r,R["utils"].aoa_to_sheet(t.chainsTable),"Цепочки"),Object(R["writeFile"])(r,"model.xlsx")},test:function(e){var t=e.state,r=e.dispatch;return r("model/test",{chains:t.chains,steps:t.steps})},normalize:function(e){var t=e.commit,r=e.getters;t("replace",r.normalized)}},V={setChains:function(e,t){e.chains=t},setSteps:function(e,t){e.steps=t}},J={namespaced:!0,state:D,getters:L,actions:H,mutations:V,modules:{model:F}},U={steps:10,chains:5,transitionsPlain:""},W={sourceTable:function(e){for(var t=e.model,r=e.chains,n=e.steps,s=[],i=[""],a=0;a<t.size;a++)i.push("S".concat(a));s.push(["Размерность",t.size]),s.push(["Цепочки",r]),s.push(["Шаги",n]),s.push([]),s.push(["Исходная матрица"]),s.push(i);for(var o=0;o<t.size;o++){for(var u=["S".concat(o)],c=0;c<t.size;c++)u.push(t.matrix[o][c].value);s.push(u)}return s.push([]),s},resultTable:function(e,t){for(var r,n=e.model,s=[],i=[""],a=0;a<n.size;a++)i.push("S".concat(a));for(var o=[["Переходов"],["Время (общее)"],["Время (среднее)"]],u=0;u<n.size;u++){var c=n.states[u];o[0].push(c.visits),o[1].push(c.time),o[2].push(c.visits>0?c.time/c.visits:0)}s.push(i),o.forEach((function(e){return s.push(e)})),s.push([]),s.push(["Матрица количества переходов"]),s.push(i);for(var l=0;l<n.size;l++){r=["S".concat(l)];for(var h=0;h<n.size;h++)r.push(t["model/transitions"][l][h].value);s.push(r)}s.push([]),s.push(["Матрица вероятности переходов"]),s.push(i);for(var v=0;v<n.size;v++){r=["S".concat(v)];for(var f=0;f<n.size;f++)r.push(t["model/transitionsNormalized"][v][f].value);s.push(r)}s.push([]),s.push(["Матрица частот переходов"]),s.push(i);for(var p=0;p<n.size;p++){r=["S".concat(p)];for(var d=0;d<n.size;d++)r.push(t["model/frequency"][p][d].value);s.push(r)}return s.push([]),s},chainsTable:function(e){var t=e.model,r=[];return r.push(["Цепочки"]),t.chains.forEach((function(e){return r.push(e)})),r}},K={save:function(e){var t=e.getters,r=R["utils"].book_new();R["utils"].book_append_sheet(r,R["utils"].aoa_to_sheet(t.sourceTable),"Исходная модель"),R["utils"].book_append_sheet(r,R["utils"].aoa_to_sheet(t.resultTable),"Результаты"),R["utils"].book_append_sheet(r,R["utils"].aoa_to_sheet(t.chainsTable),"Цепочки"),Object(R["writeFile"])(r,"model.xlsx")},test:function(e){var t=e.state,r=e.dispatch;return r("model/test",{chains:t.chains,steps:t.steps})},normalize:function(e){var t=e.commit,r=e.getters;t("replace",r.normalized)},clear:function(e){var t=e.commit;t("clear")}},G={setChains:function(e,t){e.chains=t},setSteps:function(e,t){e.steps=t},setTransitionsPlain:function(e,t){e.transitionsPlain=t}},Q={namespaced:!0,state:U,getters:W,actions:K,mutations:G,modules:{model:F}},X={iterations:0,matrices:[],states:[],chains:[]},Y={statesNormalized:function(e){var t=e.states;return t.map((function(e){var t=e.reduce((function(e,t){return e+t.visits}),0);return e.map((function(e){return N["d"].normalized(e,t)}))}))},transitions:function(e){var t=e.matrices,r=e.chains;return t.map((function(e,t){for(var n=r[t],s=[],i=0;i<e.length;i++){for(var a=[],o=0;o<e[i].length;o++)a.push(S["a"].alter(e[i][o],0));s.push(a)}for(var u=0;u<n.length;u++)for(var c=1;c<n[u].length;c++){var l=n[u][c-1],h=n[u][c];s[l][h].value++}return s}))},transitionsNormalized:function(e,t){var r=t.transitions;return r.map((function(e){return P(e)}))},frequency:function(e,t){var r=t.transitions;return r.map((function(e){for(var t=[],r=e.reduce((function(e,t){return e+t.reduce((function(e,t){return e+t.value}),0)}),0),n=0;n<e.length;n++){for(var s=[],i=0;i<e.length;i++)r?s.push(S["a"].normalized(e[n][i],r)):s.push(S["a"].empty());t.push(s)}return t}))},transitionsPlain:function(e){var t=e.chains;return t.map((function(e){return e.join(" ")})).join("\n")},transitionsHumanized:function(e){var t=e.chains;return t.map((function(e){return e.join(" ↠ ")}))}},Z={clear:function(e){var t=e.commit;t("clear")}},ee={setBatch:function(e,t){for(var r=t.cycles,n=[],s=[],i=[],a=1;a<r.length;a++)n.push(r[a].states),s.push(r[a].chains),i.push(r[a].matrix);e.iterations=r.length-1,e.states=n,e.chains=s,e.matrices=i},clear:function(e){e.iterations=0,e.states=[],e.chains=[],e.matrices=[]}},te={namespaced:!0,state:X,getters:Y,actions:Z,mutations:ee,functions:{normalize:P}},re={steps:10,chains:5,iterations:10,eps:0,distribution:"uniform",distributionA:0,distributionB:1},ne={sourceTable:function(e){for(var t=e.model,r=e.chains,n=e.steps,s=e.iterations,i=e.eps,a=e.distribution,o=e.distributionA,u=e.distributionB,c=[],l=[""],h=0;h<t.size;h++)l.push("S".concat(h));c.push(["Размерность",t.size]),c.push(["Цепочки",r]),c.push(["Шаги",n]),c.push(["Итерации",s]),c.push(["ε",i]),c.push(["Распределение",a,o,u]),c.push([]),c.push(["Исходная матрица"]),c.push(l);for(var v=0;v<t.size;v++){for(var f=["S".concat(v)],p=0;p<t.size;p++)f.push(t.matrix[v][p].value);c.push(f)}return c.push([]),c},statesByIterationTable:function(e,t){for(var r,n=e.model,s=e.iterations,i=[],a=[{s:{r:0,c:0},e:{r:1,c:0}}],o=["Итерация"],u=[""],c=0;c<n.size;c++)o.push("S".concat(c),""),u.push("Частота","Время"),a.push({s:{r:0,c:1+2*c},e:{r:0,c:2+2*c}});i.push(o,u),r=["Исходная модель"],t["model/statesNormalized"].forEach((function(e){return r.push(e.visits,e.time)})),i.push(r),t["multiModel/statesNormalized"].forEach((function(e,t){r=[t===s-1?"Итоговая модель":t+1],e.forEach((function(e){return r.push(e.visits,e.time)})),i.push(r)}));var l=R["utils"].aoa_to_sheet(i);return l["!merges"]=a,l},transitionsByIterationTable:function(e,t){for(var r,n=e.model,s=e.iterations,i=[],a=[{s:{r:0,c:0},e:{r:1,c:0}}],o=[],u=["Итерация"],c=[""],l=0;l<n.size;l++)for(var h=0;h<n.size;h++)if(0!==n.matrix[l][h].value){o.push({x:l,y:h});var v=o.length-1;u.push("S".concat(l," ↠ S").concat(h),""),c.push("Частота","Количество переходов"),a.push({s:{r:0,c:1+2*v},e:{r:0,c:2+2*v}})}i.push(u,c),r=["Исходная модель"];for(var f=0;f<o.length;f++){var p=o[f],d=p.x,m=p.y;r.push(t["model/frequency"][d][m].value,t["model/transitions"][d][m].value)}i.push(r);for(var b=0;b<s;b++){r=[b===s-1?"Итоговая модель":b+1];for(var z=0;z<o.length;z++){var _=o[z],g=_.x,y=_.y;r.push(t["multiModel/frequency"][b][g][y].value,t["multiModel/transitions"][b][g][y].value)}i.push(r)}var k=R["utils"].aoa_to_sheet(i);return k["!merges"]=a,k},resultTable:function(e,t){for(var r,n=e.model,s=[],i=[""],a=0;a<n.size;a++)i.push("S".concat(a));for(var o=[["Переходов"],["Время (общее)"],["Время (среднее)"]],u=0;u<n.size;u++){var c=n.states[u];o[0].push(c.visits),o[1].push(c.time),o[2].push(c.visits>0?c.time/c.visits:0)}s.push(i),o.forEach((function(e){return s.push(e)})),s.push([]),s.push(["Матрица количества переходов"]),s.push(i);for(var l=0;l<n.size;l++){r=["S".concat(l)];for(var h=0;h<n.size;h++)r.push(t["model/transitions"][l][h].value);s.push(r)}s.push([]),s.push(["Матрица вероятности переходов"]),s.push(i);for(var v=0;v<n.size;v++){r=["S".concat(v)];for(var f=0;f<n.size;f++)r.push(t["model/transitionsNormalized"][v][f].value);s.push(r)}s.push([]),s.push(["Матрица частот переходов"]),s.push(i);for(var p=0;p<n.size;p++){r=["S".concat(p)];for(var d=0;d<n.size;d++)r.push(t["model/frequency"][p][d].value);s.push(r)}return s.push([]),s},chainsTable:function(e){var t=e.model,r=[];return r.push(["Цепочки"]),t.chains.forEach((function(e){return r.push(e)})),r}},se={save:function(e){var t=e.getters,r=R["utils"].book_new();R["utils"].book_append_sheet(r,R["utils"].aoa_to_sheet(t.sourceTable),"Исходная модель"),R["utils"].book_append_sheet(r,t.statesByIterationTable,"Состояния по итерациям"),R["utils"].book_append_sheet(r,t.transitionsByIterationTable,"Переходы по итерациям"),R["utils"].book_append_sheet(r,R["utils"].aoa_to_sheet(t.resultTable),"Результаты"),Object(R["writeFile"])(r,"model.xlsx")},test:function(e){var t=e.state,r=e.getters,n=e.commit,s=[],i={type:t.distribution,attrs:[t.distributionA,t.distributionB]};s.push(C({size:t.model.size,chains:t.chains,steps:t.chains,matrix:r["model/normalized"],distribution:i}));for(var a=1;a<=t.iterations;a++)s.push(C({size:t.model.size,chains:t.chains,steps:t.chains,matrix:M({size:t.model.size,chains:s[a-1].chains}),distribution:i}));n("model/setBatch",{states:s[0].states,chains:s[0].chains}),n("multiModel/setBatch",{cycles:s})},normalize:function(e){var t=e.commit,r=e.getters;t("replace",r.normalized)},clear:function(e){var t=e.state,r=e.commit;r("".concat(t.multiModel.iterations>0?"multiModel":"model","/clear"))}},ie={setChains:function(e,t){e.chains=Number(t)},setSteps:function(e,t){e.steps=Number(t)},setIterations:function(e,t){e.iterations=Number(t)},setEps:function(e,t){e.eps=Number(t)},setDistribution:function(e,t){e.distribution=t},setDistributionA:function(e,t){e.distributionA=Number(t)},setDistributionB:function(e,t){e.distributionB=Number(t)}},ae={namespaced:!0,state:re,getters:ne,actions:se,mutations:ie,modules:{model:F,multiModel:te}},oe=r("bfa9"),ue=r("b054"),ce=r.n(ue),le=r("2f62");n["a"].use(le["a"]);var he=!1,ve=new oe["a"]({key:"markov",storage:localStorage}),fe=new le["a"].Store({modules:{direct:J,reverse:Q,research:ae},strict:he,plugins:[ve.plugin].concat(Object(x["a"])(he?[ce()()]:[]))}),pe=r("3003"),de=r("8c60"),me=r("2616"),be=r("ecee"),ze=r("c074"),_e=r("ad3d");be["c"].add(ze["h"],ze["f"],ze["d"],ze["g"],ze["e"],ze["b"],ze["a"],ze["c"]),n["a"].use(pe["a"]),n["a"].use(de["a"]),n["a"].directive("b-tooltip",me["a"]),n["a"].component("fa-icon",_e["a"]),n["a"].config.productionTip=!1,new n["a"]({router:k,store:fe,render:function(e){return e(m)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},cf25:function(e,t,r){"use strict";var n=r("56cc"),s=r.n(n);s.a}});
//# sourceMappingURL=app.33f7ea44.js.map